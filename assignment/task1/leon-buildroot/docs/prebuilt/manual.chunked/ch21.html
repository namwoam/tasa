<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chapter 21. Debugging Buildroot</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="home" href="index.html" title="The Buildroot user manual" /><link rel="up" href="pt03.html" title="Part III. Developer guide" /><link rel="prev" href="ch20.html" title="Chapter 20. Download infrastructure" /><link rel="next" href="ch22.html" title="Chapter 22. Contributing to Buildroot" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="ch20.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch22.html">Next</a></td></tr></table><hr /></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="debugging-buildroot"></a>Chapter 21. Debugging Buildroot</h2></div></div></div><p>It is possible to instrument the steps <code class="literal">Buildroot</code> does when building
packages. Define the variable <code class="literal">BR2_INSTRUMENTATION_SCRIPTS</code> to contain
the path of one or more scripts (or other executables), in a
space-separated list, you want called before and after each step. The
scripts are called in sequence, with three parameters:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">start</code> or <code class="literal">end</code> to denote the start (resp. the end) of a step;
</li><li class="listitem">
the name of the step about to be started, or which just ended;
</li><li class="listitem">
the name of the package.
</li></ul></div><p>For example :</p><pre class="screen">make BR2_INSTRUMENTATION_SCRIPTS="/path/to/my/script1 /path/to/my/script2"</pre><p>The list of steps is:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">extract</code>
</li><li class="listitem">
<code class="literal">patch</code>
</li><li class="listitem">
<code class="literal">configure</code>
</li><li class="listitem">
<code class="literal">build</code>
</li><li class="listitem">
<code class="literal">install-host</code>, when a host-package is installed in <code class="literal">$(HOST_DIR)</code>
</li><li class="listitem">
<code class="literal">install-target</code>, when a target-package is installed in <code class="literal">$(TARGET_DIR)</code>
</li><li class="listitem">
<code class="literal">install-staging</code>, when a target-package is installed in <code class="literal">$(STAGING_DIR)</code>
</li><li class="listitem">
<code class="literal">install-image</code>, when a target-package installs files in <code class="literal">$(BINARIES_DIR)</code>
</li></ul></div><p>The script has access to the following variables:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">BR2_CONFIG</code>: the path to the Buildroot .config file
</li><li class="listitem">
<code class="literal">HOST_DIR</code>, <code class="literal">STAGING_DIR</code>, <code class="literal">TARGET_DIR</code>: see
    <a class="xref" href="ch18.html#generic-package-reference" title="18.6.2. generic-package reference">Section 18.6.2, “<code class="literal">generic-package</code> reference”</a>
</li><li class="listitem">
<code class="literal">BUILD_DIR</code>: the directory where packages are extracted and built
</li><li class="listitem">
<code class="literal">BINARIES_DIR</code>: the place where all binary files (aka images) are
    stored
</li><li class="listitem">
<code class="literal">BASE_DIR</code>: the base output directory
</li></ul></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch20.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="pt03.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch22.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>