
# Avoid mkprom2 appearing to be a subcomponent of mklinuximg
config BR2_TARGET_MKPROM2_AVOID_NESTING
       bool

config BR2_TARGET_MKPROM2
	bool "mkprom2"
	depends on (BR2_sparc_leon3 || BR2_sparc_leon5) && BR2_LINUX_KERNEL && \
		BR2_LINUX_KERNEL_VMLINUX && BR2_TARGET_MKLINUXIMG
	help
	  MKPROM2 is a bootloader for LEON SPARC32 systems.

if BR2_TARGET_MKPROM2
choice
	prompt "MKPROM2 Version"
	help
	  Select the specific MKPROM2 version you want to use

config BR2_TARGET_MKPROM2_LATEST_VERSION
	bool "2.0.69"

config BR2_TARGET_MKPROM2_CUSTOM_VERSION
	bool "Custom version"
	help
	  This option allows to use a specific official versions

config BR2_TARGET_MKPROM2_CUSTOM_TARBALL
	bool "Custom tarball"

config BR2_TARGET_MKPROM2_CUSTOM_GIT
	bool "Custom Git repository"

endchoice

config BR2_TARGET_MKPROM2_CUSTOM_VERSION_VALUE
	string "MKPROM2 version"
	depends on BR2_TARGET_MKPROM2_CUSTOM_VERSION

config BR2_TARGET_MKPROM2_CUSTOM_TARBALL_LOCATION
	string "URL of custom MKPROM2 tarball"
	depends on BR2_TARGET_MKPROM2_CUSTOM_TARBALL

if BR2_TARGET_MKPROM2_CUSTOM_GIT

config BR2_TARGET_MKPROM2_CUSTOM_REPO_URL
	string "URL of custom repository"

config BR2_TARGET_MKPROM2_CUSTOM_REPO_VERSION
	string "Custom repository version"
	help
	  Revision to use in the typical format used by Git,
	  e.g. a SHA ID, a tag, or branch.

endif

config BR2_TARGET_MKPROM2_VERSION
	string
	default "2.0.69"	if BR2_TARGET_MKPROM2_LATEST_VERSION
	default BR2_TARGET_MKPROM2_CUSTOM_VERSION_VALUE \
		if BR2_TARGET_MKPROM2_CUSTOM_VERSION
	default "custom"	if BR2_TARGET_MKPROM2_CUSTOM_TARBALL
	default BR2_TARGET_MKPROM2_CUSTOM_REPO_VERSION \
		if BR2_TARGET_MKPROM2_CUSTOM_GIT

config BR2_TARGET_MKPROM2_FREQ
	int "System frequency in MHz"
	default 50
	help
	  System frequency to set up timers.

config BR2_TARGET_MKPROM2_ARGS
       string "Arguments to pass to the mkprom2 call"
       default ""

endif
