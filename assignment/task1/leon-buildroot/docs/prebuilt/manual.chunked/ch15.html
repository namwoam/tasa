<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chapter 15. How Buildroot works</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="home" href="index.html" title="The Buildroot user manual" /><link rel="up" href="pt03.html" title="Part III. Developer guide" /><link rel="prev" href="pt03.html" title="Part III. Developer guide" /><link rel="next" href="ch16.html" title="Chapter 16. Coding style" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="pt03.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch16.html">Next</a></td></tr></table><hr /></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_how_buildroot_works"></a>Chapter 15. How Buildroot works</h2></div></div></div><p>As mentioned above, Buildroot is basically a set of Makefiles that
download, configure, and compile software with the correct options. It
also includes patches for various software packages - mainly the ones
involved in the cross-compilation toolchain (<code class="literal">gcc</code>, <code class="literal">binutils</code> and
<code class="literal">uClibc</code>).</p><p>There is basically one Makefile per software package, and they are
named with the <code class="literal">.mk</code> extension. Makefiles are split into many different
parts.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
The <code class="literal">toolchain/</code> directory contains the Makefiles
  and associated files for all software related to the
  cross-compilation toolchain: <code class="literal">binutils</code>, <code class="literal">gcc</code>, <code class="literal">gdb</code>,
  <code class="literal">kernel-headers</code> and <code class="literal">uClibc</code>.
</li><li class="listitem">
The <code class="literal">arch/</code> directory contains the definitions for all the processor
  architectures that are supported by Buildroot.
</li><li class="listitem">
The <code class="literal">package/</code> directory contains the Makefiles and
  associated files for all user-space tools and libraries that Buildroot
  can compile and add to the target root filesystem. There is one
  sub-directory per package.
</li><li class="listitem">
The <code class="literal">linux/</code> directory contains the Makefiles and associated files for
  the Linux kernel.
</li><li class="listitem">
The <code class="literal">boot/</code> directory contains the Makefiles and associated files for
  the bootloaders supported by Buildroot.
</li><li class="listitem">
The <code class="literal">system/</code> directory contains support for system integration, e.g.
  the target filesystem skeleton and the selection of an init system.
</li><li class="listitem">
The <code class="literal">fs/</code> directory contains the Makefiles and
  associated files for software related to the generation of the
  target root filesystem image.
</li></ul></div><p>Each directory contains at least 2 files:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">something.mk</code> is the Makefile that downloads, configures,
  compiles and installs the package <code class="literal">something</code>.
</li><li class="listitem">
<code class="literal">Config.in</code> is a part of the configuration tool
  description file. It describes the options related to the
  package.
</li></ul></div><p>The main Makefile performs the following steps (once the
configuration is done):</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Create all the output directories: <code class="literal">staging</code>, <code class="literal">target</code>, <code class="literal">build</code>,
  etc. in the output directory (<code class="literal">output/</code> by default,
  another value can be specified using <code class="literal">O=</code>)
</li><li class="listitem">
Generate the toolchain target. When an internal toolchain is used, this
  means generating the cross-compilation toolchain. When an external
  toolchain is used, this means checking the features of the external
  toolchain and importing it into the Buildroot environment.
</li><li class="listitem">
Generate all the targets listed in the <code class="literal">TARGETS</code> variable. This
  variable is filled by all the individual components'
  Makefiles. Generating these targets will trigger the compilation of
  the userspace packages (libraries, programs), the kernel, the
  bootloader and the generation of the root filesystem images,
  depending on the configuration.
</li></ul></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pt03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="pt03.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch16.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>